<div class="container">
	<div class="page-header">
	    <div class="pull-right">
	    	<a class="btn btn-default" type="button" href="/questions"><i class="fa fa-fw fa-inbox"></i> Zur Übersicht</a>
	    </div>
	    <h2>Analyse</h2>
	</div>

	<div class="row">
	    <div class="col-xs-12 col-sm-9 col-md-9">
	    	<dl class="dl-horizontal">
	    		<dt>Zusammenfassung</dt>
	    		<dd>
	    			<progress>
	    				<bar value="correct_q_count / all_question_count * 100" type="success"></bar>
	    				<bar value="wrong_q_count / all_question_count * 100" type="danger"></bar>
	    				<bar value="no_answer_q_count / all_question_count * 100" type="warning"></bar>
	    				<bar value="free_q_count / all_question_count * 100" type="info"></bar>
	    			</progress>

	    		    <p>
						Die Klausur umfasste <strong>{{ all_question_count }} Frage{{ all_question_count>1 ? 'n':'' }}</strong>, von denen du <strong>{{ all_question_count==worked_question_count ? 'alle bearbeitet':worked_question_count+' bearbeitet' }}</strong> hast.

						<span ng-if="solved_q_count == 0">
							Allerdings hast du <strong class="text-danger">keine Frage gelöst</strong>. Kann man nicht sehen, wohin wir kämen, wenn wir gingen...
						</span>

						<span ng-if="solved_q_count > 0">
							<span ng-if="free_q_count>0 || no_answer_q_count>0">
							    Es

							    <span ng-if="free_q_count>0">
							    	<span ng-if="free_q_count>1">
							    		waren <strong class="text-info">{{ free_q_count }} freie Fragen</strong>
									</span>
									<span ng-if="free_q_count==1">
							    		war <strong class="text-info">eine freie Frage</strong>
									</span>
							    </span>

							    <span ng-if="free_q_count>0 && no_answer_q_count>0">und</span>

							    <span ng-if="free_q_count==0">
							    	<span ng-if="no_answer_q_count>1">
							    		waren
									</span>
									<span ng-if="no_answer_q_count==1">
							    		war
									</span>
							    </span>

							    <span ng-if="no_answer_q_count>1">
							    	<strong class="text-warning">{{ no_answer_q_count }} Fragen ohne gespeicherte Antwort</strong>
							    </span>
							    <span ng-if="no_answer_q_count==1">
							    	<strong class="text-warning">eine Frage ohne gespeicherte Antwort</strong>
							    </span>

							    dabei, insgesamt hast du so {{ solved_q_count }} Frage{{ solved_q_count > 1 ? 'n':'' }} gelöst.
							</span>

							<span ng-if="correct_q_count==solved_q_count">
							    Du konntest <strong class="text-success">alle Fragen richtig beantworten</strong>. Wenn du so weiter machst, wirst du mal Chefarzt.
							</span>

							<span ng-if="correct_q_count!=solved_q_count && wrong_q_count!=solved_q_count && no_answer_q_count!=solved_q_count">
							    Du konntest
							    <strong class="text-success">{{ correct_q_count }} Frage{{ correct_q_count>1 ? 'n':'' }} richtig beantworten</strong>,

							    von
							    <span ng-if="wrong_q_count>1">den <strong class="text-danger">{{ wrong_q_count }} falsch beantworteten Fragen</strong></span>
							    <span ng-if="wrong_q_count==1">der falsch beantworteten Frage</strong></span>
							    weißt du jetzt immerhin die Antwort.
							   
							    Das entspricht einer Quote von <strong>{{ (correct_q_count / solved_q_count * 100) | limitTo:2 }}%</strong>.

							    <span ng-if="correct_q_count >= wrong_q_count" ng-switch="(random+1) % 2">
							    	<span ng-switch-when="0">Du wirst mal ein guter Arzt.</span>
							    	<span ng-switch-when="1">Da sieht man klar deine Ambitionen auf den Chefarztsessel.</span>
							    </span>
							    <span ng-if="correct_q_count < wrong_q_count" ng-switch="(random+2) % 4">
							    	<span ng-switch-when="0">Dein Patient wäre leider, nunja, tot.</span>
							    	<span ng-switch-when="1">Den Patienten kriegen wir jetzt nur noch chirurgisch wieder heile.</span>
							    	<span ng-switch-when="2">Da hoffen wir mal, dass dein Patient kein Rechtsanwalt ist. :)</span>
							    	<span ng-switch-when="3">Eine gute Berufshaftplichtversicherung ist also das A und O...</span>
							    </span>
							</span>

							<span ng-if="wrong_q_count==solved_q_count">
							    Du konntest <strong class="text-danger">keine Frage richtig beantworten</strong>. Komm schon, ein Arzt hat ja auch Vorbildfunktion.
							</span>

							<span ng-if="no_answer_q_count==solved_q_count">
								Vielleicht kannst du uns mithelfen richtige Antworten herauszufinden?
							</span>
						</span>
	    		    </p>
	    		    <br>
	    		</dd>

	    		<dt style="margin-top:8px;" ng-if="solved_q_count > 0">Details</dt>
	    		<dd ng-if="solved_q_count > 0">
	    			<table class="table">
	    				<thead>
	    					<th></th>
	    				    <th>Frage</th>
							<th></th>
	    				</thead>

	    				<tbody>
	    					<tr ng-repeat="question in workedQuestionList">
	    						<td>
		    						<div class="dot dot-warning" ng-if="question.correct_answer==0"></div>
		    						<div class="dot dot-success" ng-if="question.correct_answer==question.given_result && question.given_result>0 && question.correct_answer>0"></div>
		    						<div class="dot dot-danger" ng-if="question.correct_answer!=question.given_result && question.given_result>0 && question.correct_answer>0"></div>
		    						<div class="dot dot-info" ng-if="question.type==1"></div>
	    						</td>
	    						<td style="padding-top: 11px;">
		    						<div style="margin-bottom: 12px;" ng-bind-html="question.question"></div>
		    						<p class="question-answer strong text-danger bg-danger" ng-show="question.correct_answer!=question.given_result && question.given_result>0 && question.correct_answer>0">
			    						<span ng-bind-html="question.answers[question.given_result-1]"></span>
			    					</p>
		    						<p class="question-answer strong text-success bg-success" ng-show="question.correct_answer>0 && question.show_correct_answer == 1 || question.correct_answer==question.given_result">

			    						<span ng-show="question.show_correct_answer == 1 || question.correct_answer==question.given_result">
			    							<span ng-bind-html="question.answers[question.correct_answer-1]"></span>
			    						</span>

			    					</p>
			    					<center>
			    						<button class="btn btn-sm btn-success" style="width: 200px;" ng-click="question.show_correct_answer = 1" ng-show="question.show_correct_answer != 1 && question.correct_answer!=question.given_result && question.correct_answer > 0">Lösung anzeigen</button>
			    					</center>
	    						</td>
	    						<td>
		    						<a href="question?id={{ question.question_id }}">
										<i class="fa fa-chevron-right"></i>
									</a>
	    						</td>
	    					</tr>
	    				</tbody>
					</table>
	    		</dd>

	    		<hr>

	    		<dt ng-if="solved_q_count > 0">Legende</dt>
	    		<dd style="line-height: 24px;" ng-if="solved_q_count > 0">
	    			<div class="dot dot-success pull-left" style="margin-top:3px; margin-right: 14px;"></div> Richtig gelöst<br>
	    			<div class="dot dot-danger pull-left" style="margin-top:3px; margin-right: 14px;"></div> Falsch gelöst<br>
	    			<div class="dot dot-warning pull-left" style="margin-top:3px; margin-right: 14px;"></div> Keine Antwort<br>
	    			<div class="dot dot-info pull-left" style="margin-top:3px; margin-right: 14px;"></div> Freie Frage<br>
	    		</dd>
	    	</dl>
	    </div>

	    <div class="col-xs-12 col-sm-3 col-md-3">
	    	<div class="panel panel-default" ng-show="exam">
	    		<div class="panel-heading">
	    	    	<h3 class="panel-title"><i class="fa fa-fw fa-flask"></i> {{ exam.subject }}</h3>
				</div>

				<ul class="list-group">
					<li class="list-group-item">{{ exam.semester }}. Semester<span ng-show="exam.sort">, {{ exam.sort }}</span></li>
	    			<li class="list-group-item"><i class="fa fa-fw fa-calendar"></i> {{ exam.date }}</li>
	    			<li class="list-group-item" ng-if="exam.professor"><i class="fa fa-fw fa-user-md"></i> {{ exam.professor }}</li>
	    			<li class="list-group-item" ng-if="exam.notes"><i class="fa fa-fw fa-pencil-square-o"></i> {{ exam.notes }}</li>
				</ul>
	    	</div>
	    </div>
	</div>
</div>